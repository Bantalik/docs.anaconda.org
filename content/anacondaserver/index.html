---
title: Installing Anaconda Server

include: true
weight: 0
sub_items:
  - id: requirements
    title: Requirements
  - id: install-mongodb
    title: Install MongoDB
  - id: log-output
    title: Log the Output to Continuum
  - id: create-binstar-user
    title: Create the Binstar User
  - id: install-miniconda
    title: Install Miniconda
  - id: install-binstar
    title: Install Binstar
  - id: configure-binstar
    title: Configure the Binstar Server
---

{% from "macros.html" import section, subsection %}
{% extends "layout.html" %}

{% block main %}

On-site Binstar installation allows you to create and maintain a private version of [binstar.org](https://binstar.org)
for easy creation and sharing of custom conda and PyPI packages within your organization.

The following instructions will guide you through the process of installing and
configuring your On-site Binstar installation.  If you have any questions about this process,
please contact your sales representative for additional assistance.

<strong>Please note:</strong> some commands may vary slightly by distribution.  These instructions are written for a Red Hat distribution.


{% call section('requirements')%}
### Requirements

* root access
* network connectivity
* an On-site Binstar installation token (this will be provided to you by your sales representative
at the time of purchase).


This installation guide is grouped into three components: steps that must be performed with root access,
steps that should be performed as the Binstar user, and maintenance and configurable aspects of the
installation which you may wish to customize.

{% endcall %}

Perform as Root
---------------

{% call section('install-mongodb')%}
### Install MongoDB

See the [official installation guide](http://docs.mongodb.org/manual/installation/) for installation
instructions for your platform.  Once you have successfully installed and started MongoDB,
you can proceed with your installation.

Because the MongoDB instance must be running before the Binstar server can be started, you will likely
want to configure MongoDB to run automatically on machine startup.

To make sure mongo is running run:

    mongo --eval 'db.serverStatus().ok'

{% endcall %}
{% call section('create-binstar-user')%}
### Create the Binstar user


It is recommended although not required that you create a Binstar user at this time:

	sudo useradd -m binstar
	sudo mkdir -m 0770 /etc/binstar
	sudo chown -R binstar:binstar /etc/binstar

At this point, you can transition to the Binstar user account,
as you will not need root access for any of the remaining steps:

	sudo su - binstar

{% endcall %}

Perform as Binstar User
-----------------------

{% call section('install-miniconda')%}

### Install Miniconda


Download and install Miniconda, which will give you access to the conda command:

	curl 'http://repo.continuum.io/miniconda/Miniconda-3.5.5-Linux-x86_64.sh' > Miniconda.sh
	bash Miniconda.sh

By default, Miniconda will install in the directory from which you execute the installer;
you have the option to override this configuration and choose a different directory if you wish.
Upon successfully completing the installation, you will be prompted to add the install location to your path:

	Do you wish the installer to prepend the Miniconda install location
	to PATH in your /home/binstar/.bashrc ? [yes|no]
	[no] >>> yes

<strong>Please note:</strong> you must answer "yes" to ensure Miniconda will be added to your path variable.
You will also need to open a new terminal session or run the <code>source ~/.bashrc</code> command for this change to take effect.

{% endcall %}

{% call section('install-binstar')%}
### Install Binstar


In order to install On-site Binstar, you will need to execute the cas-installer tool
using the custom On-site Binstar token provided to you by your sales representative at the time of purchase:

	conda config --add channels https://conda.binstar.org/t/<INSTALL_TOKEN>/binstar
	conda install binstar-server

<div class="alert alert-warning">
    You must replace the `INSTALL_TOKEN` value in the above command with the token provided to you by your sales representative.
</div>

{% endcall %}

{% call section('configure-binstar')%}
###  Configure the Binstar Server



Initialize the Binstar server instance, and indicate the desired filepath for package storage:

	binstar-config --init
	binstar-config --set fs_storage_root /etc/binstar/package-storage

Note: You may change the `/etc/binstar/package-storage` directory to any location that is accessible by the Binstar user.


Create your initial On-site Binstar superuser, <em>being sure to update this command to include your desired email address and password</em>:

	binstar-create-user --username "superuser" --password "yourpassword"  --email "your@email.com" --superuser

Run the On-site Binstar server installation:

	binstar-server --port 8080

You should now see a working, private installation of binstar.org when you visit <a href="http://localhost:8080">http://localhost:8080</a>.

Finally, you may wish to automatically restart your On-site Binstar installation if the instance fails or errors and on reboot:

Create a supervisord instance:

    binstar-install-supervisord-config.sh

To test that the config script ran correctly run:

    supervisorctl status

You should see somthing like:

    binstar-server                   RUNNING    pid 8828, uptime 0:00:14
    binstar-worker                   RUNNING    pid 8827, uptime 0:00:14


{% endcall %}

{% call section('log-output') %}
### Log the Output to Continuum

<strong>Please note:</strong> This step is optional, but highly recommended.

This step rquires **sudo**:

    sudo binstar-centralized-logging.sh --product-name PRODUCT_NAME

If you need to switch out of the binstar user to perform this step record the full path to the logging script with:

    which binstar-centralized-logging.sh

run:

    sudo /full/path/to/binstar-centralized-logging.sh --product-name PRODUCT_NAME

Remember to replace Replace `/full/path/to/` with the actual path to the `binstar-centralized-logging.sh`

<div class="alert alert-warning">
    You must replace `PRODUCT_NAME` from the text above.
</div>

{% endcall %}

{%endblock%}

